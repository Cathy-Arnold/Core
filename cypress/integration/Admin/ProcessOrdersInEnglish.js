/// <reference types="cypress" />

import { extendWith } from "cypress/types/lodash"
import { admin } from "../../support/page_objects/admin/adminFunctions"



describe('Internal API Jobs', () => {


    it('Process Orders', () => {
        
        while (i < loop) {
            //steps to get SellerOrderStatusId from DB
            
            if { sellerOrderStatusId is not = 17
            const isJobRunning = false
            const i = 0
                const loop = 2
                while (i < loop) {
                    i++


            admin.setAdminAuthCookie()
            cy.visit('https://store.tcgplayer-stg.com/admin/InternalApi/StartJob')
            admin.verifyAdminLogin()
            cy.get('.formRow')
            cy.wait(10000)
        } if ($RunningJobs.text().includes("There are no jobs currently running.")) {
            cy.log('No API jobs are currently running')  
            //run the 3 jobs here
        } else if div[@id="runningJobs"]/table exists {
        cy.log('An API job is running')  
        //run the 3 jobs here
         } else if { 
             ($RunningJobs.text().includes("There was an error getting the list of running API jobs")) {
                cy.log('here was an error getting the list of running API jobs - verify internal API is running.')
            assert.isNotOk(true, 'There was an error getting the list of running API jobs - verify internal API is running.')
            
             } else {
            cy.log('Something went wrong during test.')
            fail test = assert 
            
            else {
                break
            }
            //while end



        //steps to get SellerOrderStatusId from DB
        if not equal to 17 {
            cy.log('SellerOrderStatusId is not = 17 AND have fees processed.  Exiting test project.')
            //exit test
        }